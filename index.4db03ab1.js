var e=document.querySelectorAll(".field-cell"),t=document.querySelector(".game-score"),r=document.querySelector(".button.start"),n=document.querySelector(".message-lose"),o=document.querySelector(".message-win"),c=document.querySelector(".message-start"),a=!1,l=!1,s=0,u=[];function f(e){e.forEach(function(e){e.style.transform="scale(1.1)",setTimeout(function(){e.style.transform="scale(1)"},500)})}function d(){for(var e=[],t=0;t<4;t++)for(var r=0;r<4;r++)0===u[t][r]&&e.push({row:t,col:r});if(e.length>0){var n=e[Math.floor(Math.random()*e.length)];u[n.row][n.col]=.9>Math.random()?2:4}}function i(){for(var e=0;e<u.length;e++)for(var t=0;t<u[e].length;t++)if(0===u[e][t])return!1;for(var r=0;r<u.length;r++)for(var n=0;n<u[r].length;n++)if(r<u.length-1&&u[r][n]===u[r+1][n]||n<u[r].length-1&&u[r][n]===u[r][n+1])return!1;if(l)return!0;!function(e){document.querySelector(".message.".concat(e)).classList.remove("hidden")}("message-lose")}function m(e){switch(a=!1,e.key){case"ArrowLeft":a=function(){a=!1;for(var e=[],t=0;t<4;t++)for(var r=1;r<4;r++)if(0!==u[t][r]){for(var n=r;n>0&&0===u[t][n-1];)n--;0===n||u[t][n-1]!==u[t][r]?n!==r&&(u[t][n]=u[t][r],u[t][r]=0,a=!0):u[t][n-1]!==u[t][r]||e.includes(document.getElementById("cell-".concat(t,"-").concat(n-1)))||(u[t][n-1]*=2,u[t][r]=0,s+=u[t][n-1],a=!0,e.push(document.getElementById("cell-".concat(t,"-").concat(n-1))))}return f(e),e.length=0,a}();break;case"ArrowRight":a=function(){a=!1;for(var e=[],t=0;t<4;t++)for(var r=2;r>=0;r--)if(0!==u[t][r]){for(var n=r;n<3&&0===u[t][n+1];)n++;n<3&&u[t][n+1]===u[t][r]?(u[t][n+1]*=2,u[t][r]=0,s+=u[t][n+1],a=!0,e.push(document.getElementById("cell-".concat(t,"-").concat(n+1)))):n!==r&&(u[t][n]=u[t][r],u[t][r]=0,a=!0)}return f(e),e.length=0,a}();break;case"ArrowUp":a=function(){a=!1;for(var e=[],t=0;t<4;t++)for(var r=1;r<4;r++)if(0!==u[r][t]){for(var n=r;n>0&&0===u[n-1][t];)n--;n>0&&u[n-1][t]===u[r][t]?(u[n-1][t]*=2,u[r][t]=0,s+=u[n-1][t],a=!0,e.push(document.getElementById("cell-".concat(n-1,"-").concat(t)))):n!==r&&(u[n][t]=u[r][t],u[r][t]=0,a=!0)}return f(e),e.length=0,a}();break;case"ArrowDown":a=function(){a=!1;for(var e=[],t=0;t<4;t++)for(var r=2;r>=0;r--)if(0!==u[r][t]){for(var n=r;n<3&&0===u[n+1][t];)n++;n<3&&u[n+1][t]===u[r][t]?(u[n+1][t]*=2,u[r][t]=0,s+=u[n+1][t],a=!0,e.push(document.getElementById("cell-".concat(n+1,"-").concat(t)))):n!==r&&(u[n][t]=u[r][t],u[r][t]=0,a=!0)}return f(e),e.length=0,a}()}a&&!l&&(d(),v(),t.textContent=s,i()&&(l=!0,n.classList.remove("hidden"),function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(2048===u[e][t])return!0;return!1}()&&(l=!0,o.classList.remove("hidden"))))}function v(){a=!1;for(var t=0;t<4;t++)for(var r=0;r<4;r++){var o=e[4*t+r],c=u[t][r];0!==c?(o.textContent=c,o.className="field-cell value-".concat(c)):(o.textContent="",o.className="field-cell")}i()&&(l=!0,n.classList.remove("hidden"))}var h=!0;r.addEventListener("click",function(){h&&(document.getElementById("startButton").textContent="Restart",r.classList.add("restart"),h=!1),s=0,u=Array.from({length:4},function(){return Array.from({length:4},function(){return 0})}),l=!1,n.classList.add("hidden"),o.classList.add("hidden"),c.classList.remove("hidden"),t.textContent=s,d(),d(),t.textContent=s,c.classList.add("hidden"),document.addEventListener("keydown",m),v()});
//# sourceMappingURL=index.4db03ab1.js.map
